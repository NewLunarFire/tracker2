<!DOCTYPE html>
<html>
    <head>
        <title>tracker2</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <h1>Tracker2</h1>

        <fieldset>
            <legend>(Q)USB2SNES</legend>
            <button id="connect" onClick="connect()">Connect</button>

            <label for="device-select">Device select:</label>

            <select name="device" id="device-select" disabled="true">
                <option>No device available</option>
            </select>

            <button id="device-attach-button" onclick="device_attach()" disabled="true">Attach</button>
            
            <p>Device: <span id="device-info"></span></p>
        </fieldset>
        
        <!-- <button onclick="update()">Update</button> -->
        <div class="layout-grid-container">
            <div>
                <fieldset id="inventory-container">
                    <legend>Inventory</legend>
                    <img src="1x1.png" style="width: 32px; height: 48px; display: inline-block; background: url(alttp/img/sprites-items.png) -410px -281px"></img>
                    <img src="1x1.png" style="width: 32px; height: 48px; display: inline-block; background: url(alttp/img/sprites-items.png) -360px -281px"></img>
                </fieldset>
            </div>
            <div class="stack-container">
                <svg width="1000" height="1000" class="stack-overlay" id="map-svg"></svg>
                <img class="stack-bg" src="alttp/img/lightworld.png"/>
            </div>
            <div>
                <fieldset id="checks-container">
                    <legend>Checks</legend>
                </fieldset>
            </div>
        </div>

        <script type="module">
            import { Usb2Snes } from "./js/usb2snes.js"
            import Alttp from "./alttp/js/main.js"
            import Tracker from "./js/tracker.js"

            const usb2snes = new Usb2Snes()
            const tracker = new Tracker(new Alttp(usb2snes), usb2snes)
            tracker.init_layout();

            window.tracker = tracker;
            window.connect = tracker.connect;
            window.device_attach = tracker.attach;
            window.update = tracker.update;
        </script>
    </body>
</html>